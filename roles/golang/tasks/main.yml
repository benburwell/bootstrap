---
- name: check if go is installed
  command: which go
  register: go_installed
  changed_when: no
  failed_when: no
- homebrew:
    name: go
    state: present
  when: go_installed is defined and
        go_installed.rc is defined and
        go_installed.rc != 0 and
        ansible_os_family == "Darwin"
- unarchive:
    src: https://dl.google.com/go/go1.10.3.linux-amd64.tar.gz
    dest: /usr/local
    remote_src: yes
  become: true
  when: go_installed is defined and
        go_installed.rc is defined and
        go_installed.rc != 0 and
        ansible_system == "Linux"
