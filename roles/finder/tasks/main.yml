---
- homebrew:
    name: dockutil
    state: present
- osx_defaults:
    domain: com.apple.dock
    key: autohide
    type: bool
    value: true
    state: present
- shell: "dockutil --remove '{{item}}'"
  loop: '{{dock_items_to_remove}}'
  ignore_errors: true
- shell: "dockutil --find '{{item.name}}' || dockutil --add '{{item.path}}'"
  loop: '{{dock_items_to_persist}}'
- shell: "dockutil --move '{{item.name}}' --position {{item.pos}}"
  loop: '{{dock_items_to_persist}}'
